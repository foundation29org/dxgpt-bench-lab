
=============================================================================
PIPELINE PERFORMANCE COMPARISON REPORT
=============================================================================
Generated: 2025-07-16 17:53:57

COMPARISON METHODOLOGY:
- Analysis restricted to cases where BOTH pipelines found matches
- Excluding all "No Match Found" cases from both datasets
- Common matched cases: 265

=============================================================================
OVERALL PERFORMANCE COMPARISON
=============================================================================

ORIGINAL PIPELINE (diagnoses_4o):
- Total cases processed: 450
- Total matched cases: 434
- Success rate: 87.7%
- Average position: 1.615

CLASSIC PIPELINE (diagnoses_4o_juanjoclassic):
- Total cases processed: 282
- Total matched cases: 267
- Success rate: 94.68%
- Average position: 1.592

=============================================================================
FILTERED ANALYSIS (Common Matched Cases Only)
=============================================================================

CASES ANALYZED: 265

PERFORMANCE ON COMMON MATCHED CASES:

Original Pipeline (diagnoses_4o):
- Average position: 1.626
- Position distribution: {'P1': 180, 'P2': 42, 'P3': 17, 'P4': 14, 'P5': 12}

Classic Pipeline (diagnoses_4o_juanjoclassic):
- Average position: 1.585
- Position distribution: {'P1': 179, 'P13': 1, 'P2': 50, 'P3': 18, 'P4': 11, 'P5': 6}

=============================================================================
COMPARISON VERDICT
=============================================================================

WINNER: CLASSIC PIPELINE (diagnoses_4o_juanjoclassic)
IMPROVEMENT: 2.55% better average position
DIFFERENCE: 0.042 positions better on average


=============================================================================
RESOLUTION METHOD COMPARISON (Common Matched Cases)
=============================================================================

Original Pipeline Methods:
- BERT_AUTOCONFIRM: 11 cases
- BERT_MATCH: 8 cases
- ICD10_EXACT: 16 cases
- ICD10_PARENT: 2 cases
- ICD10_SIBLING: 17 cases
- LLM_JUDGMENT: 91 cases
- SNOMED_MATCH: 120 cases

Classic Pipeline Methods:
- BERT_AUTOCONFIRM: 8 cases
- BERT_MATCH: 14 cases
- ICD10_EXACT: 16 cases
- ICD10_PARENT: 3 cases
- ICD10_SIBLING: 20 cases
- LLM_JUDGMENT: 83 cases
- SNOMED_MATCH: 121 cases

=============================================================================
DETAILED CASE-BY-CASE ANALYSIS
=============================================================================

PERFORMANCE SUMMARY:
- Cases where Original performed better: 49
- Cases where Classic performed better: 51
- Cases with same performance: 165

FIRST 20 CASE COMPARISONS:
Case ID | Original | Classic | Method 4O | Method Classic | Winner
--------|----------|---------|-----------|----------------|--------
B101    | P1       | P1      | ICD10_SIBLING | ICD10_SIBLING  | SAME
B103    | P4       | P1      | LLM_JUDGMENT | SNOMED_MATCH   | CLASSIC BETTER
B104    | P1       | P1      | SNOMED_MATCH | SNOMED_MATCH   | SAME
B107    | P5       | P2      | LLM_JUDGMENT | SNOMED_MATCH   | CLASSIC BETTER
B112    | P1       | P1      | SNOMED_MATCH | SNOMED_MATCH   | SAME
B113    | P4       | P5      | BERT_AUTOCONFIRM | SNOMED_MATCH   | 4O BETTER
B118    | P3       | P4      | LLM_JUDGMENT | LLM_JUDGMENT   | 4O BETTER
B123    | P1       | P1      | SNOMED_MATCH | SNOMED_MATCH   | SAME
B124    | P1       | P1      | SNOMED_MATCH | SNOMED_MATCH   | SAME
B126    | P1       | P2      | LLM_JUDGMENT | LLM_JUDGMENT   | 4O BETTER
B133    | P1       | P1      | BERT_AUTOCONFIRM | BERT_AUTOCONFIRM | SAME
B134    | P5       | P4      | LLM_JUDGMENT | LLM_JUDGMENT   | CLASSIC BETTER
B135    | P2       | P2      | LLM_JUDGMENT | LLM_JUDGMENT   | SAME
B136    | P5       | P1      | LLM_JUDGMENT | SNOMED_MATCH   | CLASSIC BETTER
B139    | P1       | P2      | LLM_JUDGMENT | SNOMED_MATCH   | 4O BETTER
B15     | P1       | P1      | SNOMED_MATCH | BERT_MATCH     | SAME
B19     | P2       | P2      | LLM_JUDGMENT | LLM_JUDGMENT   | SAME
B2      | P2       | P1      | BERT_AUTOCONFIRM | ICD10_SIBLING  | CLASSIC BETTER
B24     | P4       | P1      | LLM_JUDGMENT | SNOMED_MATCH   | CLASSIC BETTER
B27     | P4       | P3      | LLM_JUDGMENT | LLM_JUDGMENT   | CLASSIC BETTER
... and 245 more cases

=============================================================================
CONCLUSIONS
=============================================================================

1. DATASET SCOPE:
   - Analysis based on 265 cases where both pipelines found matches
   - Excluded all "No Match Found" cases for fair comparison
   
2. PERFORMANCE WINNER:
   - Classic Pipeline
   
3. STATISTICAL SIGNIFICANCE:
   - Position difference: 0.042
   - Individual case wins: 4O=49, Classic=51, Same=165
   
4. RECOMMENDATION:
   - Use Classic Pipeline

=============================================================================
